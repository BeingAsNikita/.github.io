var objectFitImages=function(){"use strict";var s="bfred-it:object-fit-images",o=/(object-fit|object-position)\s*:\s*([-.\w\s%]+)/g,e="undefined"==typeof Image?{style:{"object-position":1}}:new Image,c="object-fit"in e.style,n="object-position"in e.style,a="background-size"in e.style,l="string"==typeof e.currentSrc,g=e.getAttribute,u=e.setAttribute,p=!1;function d(e,t,r){var i="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='"+(t||1)+"' height='"+(r||0)+"'%3E%3C/svg%3E";g.call(e,"src")!==i&&u.call(e,"src",i)}function f(e,t){e.naturalWidth?t(e):setTimeout(f,100,e,t)}function m(t){var r,i,e=function(e){for(var t,r=getComputedStyle(e).fontFamily,i={};null!==(t=o.exec(r));)i[t[1]]=t[2];return i}(t),n=t[s];if(e["object-fit"]=e["object-fit"]||"fill",!n.img){if("fill"===e["object-fit"])return;if(!n.skipTest&&c&&!e["object-position"])return}if(!n.img){n.img=new Image(t.width,t.height),n.img.srcset=g.call(t,"data-ofi-srcset")||t.srcset,n.img.src=g.call(t,"data-ofi-src")||t.src,u.call(t,"data-ofi-src",t.src),t.srcset&&u.call(t,"data-ofi-srcset",t.srcset),d(t,t.naturalWidth||t.width,t.naturalHeight||t.height),t.srcset&&(t.srcset="");try{r=t,i={get:function(e){return r[s].img[e||"src"]},set:function(e,t){return r[s].img[t||"src"]=e,u.call(r,"data-ofi-"+t,e),m(r),e}},Object.defineProperty(r,"src",i),Object.defineProperty(r,"currentSrc",{get:function(){return i.get("currentSrc")}}),Object.defineProperty(r,"srcset",{get:function(){return i.get("srcset")},set:function(e){return i.set(e,"srcset")}})}catch(e){window.console&&console.warn("https://bit.ly/ofi-old-browser")}}!function(e){if(e.srcset&&!l&&window.picturefill){var t=window.picturefill._;e[t.ns]&&e[t.ns].evaled||t.fillImg(e,{reselect:!0}),e[t.ns].curSrc||(e[t.ns].supported=!1,t.fillImg(e,{reselect:!0})),e.currentSrc=e[t.ns].curSrc||e.src}}(n.img),t.style.backgroundImage='url("'+(n.img.currentSrc||n.img.src).replace(/"/g,'\\"')+'")',t.style.backgroundPosition=e["object-position"]||"center",t.style.backgroundRepeat="no-repeat",t.style.backgroundOrigin="content-box",/scale-down/.test(e["object-fit"])?f(n.img,function(){n.img.naturalWidth>t.width||n.img.naturalHeight>t.height?t.style.backgroundSize="contain":t.style.backgroundSize="auto"}):t.style.backgroundSize=e["object-fit"].replace("none","auto").replace("fill","100% 100%"),f(n.img,function(e){d(t,e.naturalWidth,e.naturalHeight)})}function b(e,t){var r=!p&&!e;if(t=t||{},e=e||"img",n&&!t.skipTest||!a)return!1;"img"===e?e=document.getElementsByTagName("img"):"string"==typeof e?e=document.querySelectorAll(e):"length"in e||(e=[e]);for(var i=0;i<e.length;i++)e[i][s]=e[i][s]||{skipTest:t.skipTest},m(e[i]);r&&(document.body.addEventListener("load",function(e){"IMG"===e.target.tagName&&b(e.target,{skipTest:t.skipTest})},!0),p=!0,e="img"),t.watchMQ&&window.addEventListener("resize",b.bind(null,e,{skipTest:t.skipTest}))}return b.supportsObjectFit=c,b.supportsObjectPosition=n,function(){function r(e,t){return e[s]&&e[s].img&&("src"===t||"srcset"===t)?e[s].img:e}n||(HTMLImageElement.prototype.getAttribute=function(e){return g.call(r(this,e),e)},HTMLImageElement.prototype.setAttribute=function(e,t){return u.call(r(this,e),e,String(t))})}(),b}(),noJs=document.querySelector(".site-nav__wrapper--nojs"),topLine=document.querySelector(".site-header__nav-wrapper--noJs"),ifNoJs=function(){topLine.classList.remove("site-header__nav-wrapper--noJs"),noJs.classList.remove("site-nav__wrapper--nojs"),noJs.classList.add("site-nav__wrapper--close")};ifNoJs();var navToggle=document.querySelector(".site-nav__toggle"),navWrap=document.querySelector(".site-nav__wrapper"),headerTop=document.querySelector(".site-header__nav-wrapper");console.log(headerTop),navToggle.addEventListener("click",function(e){e.preventDefault(),navToggle.classList.toggle("site-nav__toggle--open"),navWrap.classList.toggle("site-nav__wrapper--close"),navWrap.classList.toggle("site-nav__list--close"),headerTop.classList.toggle("site-header__nav-wrapper--open")}),objectFitImages();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9maS5qcyIsInNjcmlwdHMuanMiXSwibmFtZXMiOlsib2JqZWN0Rml0SW1hZ2VzIiwiT0ZJIiwicHJvcFJlZ2V4IiwidGVzdEltZyIsIkltYWdlIiwic3R5bGUiLCJvYmplY3QtcG9zaXRpb24iLCJzdXBwb3J0c09iamVjdEZpdCIsInN1cHBvcnRzT2JqZWN0UG9zaXRpb24iLCJzdXBwb3J0c09GSSIsInN1cHBvcnRzQ3VycmVudFNyYyIsImN1cnJlbnRTcmMiLCJuYXRpdmVHZXRBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGUiLCJuYXRpdmVTZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJhdXRvTW9kZUVuYWJsZWQiLCJzZXRQbGFjZWhvbGRlciIsImltZyIsIndpZHRoIiwiaGVpZ2h0IiwicGxhY2Vob2xkZXIiLCJjYWxsIiwib25JbWFnZVJlYWR5IiwiY2FsbGJhY2siLCJuYXR1cmFsV2lkdGgiLCJzZXRUaW1lb3V0IiwiZml4T25lIiwiZWwiLCJkZXNjcmlwdG9ycyIsInBhcnNlZCIsImdldENvbXB1dGVkU3R5bGUiLCJmb250RmFtaWx5IiwicHJvcHMiLCJleGVjIiwiZ2V0U3R5bGUiLCJvZmkiLCJza2lwVGVzdCIsInNyY3NldCIsInNyYyIsIm5hdHVyYWxIZWlnaHQiLCJnZXQiLCJwcm9wIiwic2V0IiwidmFsdWUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInNzIiwiZXJyIiwid2luZG93IiwiY29uc29sZSIsIndhcm4iLCJwaWN0dXJlZmlsbCIsInBmIiwiXyIsIm5zIiwiZXZhbGVkIiwiZmlsbEltZyIsInJlc2VsZWN0IiwiY3VyU3JjIiwic3VwcG9ydGVkIiwicG9seWZpbGxDdXJyZW50U3JjIiwiYmFja2dyb3VuZEltYWdlIiwicmVwbGFjZSIsImJhY2tncm91bmRQb3NpdGlvbiIsImJhY2tncm91bmRSZXBlYXQiLCJiYWNrZ3JvdW5kT3JpZ2luIiwidGVzdCIsImJhY2tncm91bmRTaXplIiwiZml4IiwiaW1ncyIsIm9wdHMiLCJzdGFydEF1dG9Nb2RlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpIiwibGVuZ3RoIiwiYm9keSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwidGFyZ2V0IiwidGFnTmFtZSIsIndhdGNoTVEiLCJiaW5kIiwiZ2V0T2ZpSW1hZ2VNYXliZSIsIm5hbWUiLCJIVE1MSW1hZ2VFbGVtZW50IiwicHJvdG90eXBlIiwidGhpcyIsIlN0cmluZyIsImhpamFja0F0dHJpYnV0ZXMiLCJub0pzIiwicXVlcnlTZWxlY3RvciIsInRvcExpbmUiLCJpZk5vSnMiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJuYXZUb2dnbGUiLCJuYXZXcmFwIiwiaGVhZGVyVG9wIiwibG9nIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJ0b2dnbGUiXSwibWFwcGluZ3MiOiJBQUNBLElBQUFBLGdCQUFBLFdBQ0EsYUFFQSxJQUFBQyxFQUFBLDZCQUNBQyxFQUFBLG1EQUNBQyxFQUFBLG9CQUFBQyxNQUFBLENBQUFDLE1BQUEsQ0FBQUMsa0JBQUEsSUFBQSxJQUFBRixNQUNBRyxFQUFBLGVBQUFKLEVBQUFFLE1BQ0FHLEVBQUEsb0JBQUFMLEVBQUFFLE1BQ0FJLEVBQUEsb0JBQUFOLEVBQUFFLE1BQ0FLLEVBQUEsaUJBQUFQLEVBQUFRLFdBQ0FDLEVBQUFULEVBQUFVLGFBQ0FDLEVBQUFYLEVBQUFZLGFBQ0FDLEdBQUEsRUFvQ0EsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FFQSxJQUFBQyxFQW5DQSx3RUFtQ0FGLEdBQUEsR0FuQ0EsY0FtQ0FDLEdBQUEsR0FuQ0EsaUJBc0NBUixFQUFBVSxLQUFBSixFQUFBLFNBQUFHLEdBQ0FQLEVBQUFRLEtBQUFKLEVBQUEsTUFBQUcsR0FJQSxTQUFBRSxFQUFBTCxFQUFBTSxHQUdBTixFQUFBTyxhQUNBRCxFQUFBTixHQUVBUSxXQUFBSCxFQUFBLElBQUFMLEVBQUFNLEdBSUEsU0FBQUcsRUFBQUMsR0FDQSxJQXlFQUEsRUFDQUMsRUEx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QUEsU0FBQXlFLEdBQ0EsT0FBQTFFLEVBQUFVLEtBQUErRCxFQUFBSSxLQUFBSCxHQUFBQSxJQUdBQyxpQkFBQUMsVUFBQXpFLGFBQUEsU0FBQXVFLEVBQUExQyxHQUNBLE9BQUE5QixFQUFBUSxLQUFBK0QsRUFBQUksS0FBQUgsR0FBQUEsRUFBQUksT0FBQTlDLE1Bc0RBK0MsR0FFQXRCLEVBdE9BLEdDREF1QixLQUFBbkIsU0FBQW9CLGNBQUEsNEJBQ0FDLFFBQUFyQixTQUFBb0IsY0FBQSxtQ0FFQUUsT0FBQSxXQUNBRCxRQUFBRSxVQUFBQyxPQUFBLGtDQUNBTCxLQUFBSSxVQUFBQyxPQUFBLDJCQUNBTCxLQUFBSSxVQUFBRSxJQUFBLDZCQUlBSCxTQUVBLElBQUFJLFVBQUExQixTQUFBb0IsY0FBQSxxQkFDQU8sUUFBQTNCLFNBQUFvQixjQUFBLHNCQUNBUSxVQUFBNUIsU0FBQW9CLGNBQUEsNkJBRUEzQyxRQUFBb0QsSUFBQUQsV0FFQUYsVUFBQXBCLGlCQUFBLFFBQUEsU0FBQXdCLEdBQ0FBLEVBQUFDLGlCQUNBTCxVQUFBSCxVQUFBUyxPQUFBLDBCQUNBTCxRQUFBSixVQUFBUyxPQUFBLDRCQUNBTCxRQUFBSixVQUFBUyxPQUFBLHlCQUNBSixVQUFBTCxVQUFBUyxPQUFBLG9DQUdBekciLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qISBucG0uaW0vb2JqZWN0LWZpdC1pbWFnZXMgMy4yLjQgKi9cbnZhciBvYmplY3RGaXRJbWFnZXMgPSAoZnVuY3Rpb24gKCkge1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgT0ZJID0gJ2JmcmVkLWl0Om9iamVjdC1maXQtaW1hZ2VzJztcbnZhciBwcm9wUmVnZXggPSAvKG9iamVjdC1maXR8b2JqZWN0LXBvc2l0aW9uKVxccyo6XFxzKihbLS5cXHdcXHMlXSspL2c7XG52YXIgdGVzdEltZyA9IHR5cGVvZiBJbWFnZSA9PT0gJ3VuZGVmaW5lZCcgPyB7c3R5bGU6IHsnb2JqZWN0LXBvc2l0aW9uJzogMX19IDogbmV3IEltYWdlKCk7XG52YXIgc3VwcG9ydHNPYmplY3RGaXQgPSAnb2JqZWN0LWZpdCcgaW4gdGVzdEltZy5zdHlsZTtcbnZhciBzdXBwb3J0c09iamVjdFBvc2l0aW9uID0gJ29iamVjdC1wb3NpdGlvbicgaW4gdGVzdEltZy5zdHlsZTtcbnZhciBzdXBwb3J0c09GSSA9ICdiYWNrZ3JvdW5kLXNpemUnIGluIHRlc3RJbWcuc3R5bGU7XG52YXIgc3VwcG9ydHNDdXJyZW50U3JjID0gdHlwZW9mIHRlc3RJbWcuY3VycmVudFNyYyA9PT0gJ3N0cmluZyc7XG52YXIgbmF0aXZlR2V0QXR0cmlidXRlID0gdGVzdEltZy5nZXRBdHRyaWJ1dGU7XG52YXIgbmF0aXZlU2V0QXR0cmlidXRlID0gdGVzdEltZy5zZXRBdHRyaWJ1dGU7XG52YXIgYXV0b01vZGVFbmFibGVkID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGNyZWF0ZVBsYWNlaG9sZGVyKHcsIGgpIHtcbiAgcmV0dXJuIChcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB3aWR0aD0nXCIgKyB3ICsgXCInIGhlaWdodD0nXCIgKyBoICsgXCInJTNFJTNDL3N2ZyUzRVwiKTtcbn1cblxuZnVuY3Rpb24gcG9seWZpbGxDdXJyZW50U3JjKGVsKSB7XG4gIGlmIChlbC5zcmNzZXQgJiYgIXN1cHBvcnRzQ3VycmVudFNyYyAmJiB3aW5kb3cucGljdHVyZWZpbGwpIHtcbiAgICB2YXIgcGYgPSB3aW5kb3cucGljdHVyZWZpbGwuXztcbiAgICAvLyBwYXJzZSBzcmNzZXQgd2l0aCBwaWN0dXJlZmlsbCB3aGVyZSBjdXJyZW50U3JjIGlzbid0IGF2YWlsYWJsZVxuICAgIGlmICghZWxbcGYubnNdIHx8ICFlbFtwZi5uc10uZXZhbGVkKSB7XG4gICAgICAvLyBmb3JjZSBzeW5jaHJvbm91cyBzcmNzZXQgcGFyc2luZ1xuICAgICAgcGYuZmlsbEltZyhlbCwge3Jlc2VsZWN0OiB0cnVlfSk7XG4gICAgfVxuXG4gICAgaWYgKCFlbFtwZi5uc10uY3VyU3JjKSB7XG4gICAgICAvLyBmb3JjZSBwaWN0dXJlZmlsbCB0byBwYXJzZSBzcmNzZXRcbiAgICAgIGVsW3BmLm5zXS5zdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgIHBmLmZpbGxJbWcoZWwsIHtyZXNlbGVjdDogdHJ1ZX0pO1xuICAgIH1cblxuICAgIC8vIHJldHJpZXZlIHBhcnNlZCBjdXJyZW50U3JjLCBpZiBhbnlcbiAgICBlbC5jdXJyZW50U3JjID0gZWxbcGYubnNdLmN1clNyYyB8fCBlbC5zcmM7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0U3R5bGUoZWwpIHtcbiAgdmFyIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbCkuZm9udEZhbWlseTtcbiAgdmFyIHBhcnNlZDtcbiAgdmFyIHByb3BzID0ge307XG4gIHdoaWxlICgocGFyc2VkID0gcHJvcFJlZ2V4LmV4ZWMoc3R5bGUpKSAhPT0gbnVsbCkge1xuICAgIHByb3BzW3BhcnNlZFsxXV0gPSBwYXJzZWRbMl07XG4gIH1cbiAgcmV0dXJuIHByb3BzO1xufVxuXG5mdW5jdGlvbiBzZXRQbGFjZWhvbGRlcihpbWcsIHdpZHRoLCBoZWlnaHQpIHtcbiAgLy8gRGVmYXVsdDogZmlsbCB3aWR0aCwgbm8gaGVpZ2h0XG4gIHZhciBwbGFjZWhvbGRlciA9IGNyZWF0ZVBsYWNlaG9sZGVyKHdpZHRoIHx8IDEsIGhlaWdodCB8fCAwKTtcblxuICAvLyBPbmx5IHNldCBwbGFjZWhvbGRlciBpZiBpdCdzIGRpZmZlcmVudFxuICBpZiAobmF0aXZlR2V0QXR0cmlidXRlLmNhbGwoaW1nLCAnc3JjJykgIT09IHBsYWNlaG9sZGVyKSB7XG4gICAgbmF0aXZlU2V0QXR0cmlidXRlLmNhbGwoaW1nLCAnc3JjJywgcGxhY2Vob2xkZXIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG9uSW1hZ2VSZWFkeShpbWcsIGNhbGxiYWNrKSB7XG4gIC8vIG5hdHVyYWxXaWR0aCBpcyBvbmx5IGF2YWlsYWJsZSB3aGVuIHRoZSBpbWFnZSBoZWFkZXJzIGFyZSBsb2FkZWQsXG4gIC8vIHRoaXMgbG9vcCB3aWxsIHBvbGwgaXQgZXZlcnkgMTAwbXMuXG4gIGlmIChpbWcubmF0dXJhbFdpZHRoKSB7XG4gICAgY2FsbGJhY2soaW1nKTtcbiAgfSBlbHNlIHtcbiAgICBzZXRUaW1lb3V0KG9uSW1hZ2VSZWFkeSwgMTAwLCBpbWcsIGNhbGxiYWNrKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmaXhPbmUoZWwpIHtcbiAgdmFyIHN0eWxlID0gZ2V0U3R5bGUoZWwpO1xuICB2YXIgb2ZpID0gZWxbT0ZJXTtcbiAgc3R5bGVbJ29iamVjdC1maXQnXSA9IHN0eWxlWydvYmplY3QtZml0J10gfHwgJ2ZpbGwnOyAvLyBkZWZhdWx0IHZhbHVlXG5cbiAgLy8gQXZvaWQgcnVubmluZyB3aGVyZSB1bm5lY2Vzc2FyeSwgdW5sZXNzIE9GSSBoYWQgYWxyZWFkeSBkb25lIGl0cyBkZWVkXG4gIGlmICghb2ZpLmltZykge1xuICAgIC8vIGZpbGwgaXMgdGhlIGRlZmF1bHQgYmVoYXZpb3Igc28gbm8gYWN0aW9uIGlzIG5lY2Vzc2FyeVxuICAgIGlmIChzdHlsZVsnb2JqZWN0LWZpdCddID09PSAnZmlsbCcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBXaGVyZSBvYmplY3QtZml0IGlzIHN1cHBvcnRlZCBhbmQgb2JqZWN0LXBvc2l0aW9uIGlzbid0IChTYWZhcmkgPCAxMClcbiAgICBpZiAoXG4gICAgICAhb2ZpLnNraXBUZXN0ICYmIC8vIHVubGVzcyB1c2VyIHdhbnRzIHRvIGFwcGx5IHJlZ2FyZGxlc3Mgb2YgYnJvd3NlciBzdXBwb3J0XG4gICAgICBzdXBwb3J0c09iamVjdEZpdCAmJiAvLyBpZiBicm93c2VyIGFscmVhZHkgc3VwcG9ydHMgb2JqZWN0LWZpdFxuICAgICAgIXN0eWxlWydvYmplY3QtcG9zaXRpb24nXSAvLyB1bmxlc3Mgb2JqZWN0LXBvc2l0aW9uIGlzIHVzZWRcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICAvLyBrZWVwIGEgY2xvbmUgaW4gbWVtb3J5IHdoaWxlIHJlc2V0dGluZyB0aGUgb3JpZ2luYWwgdG8gYSBibGFua1xuICBpZiAoIW9maS5pbWcpIHtcbiAgICBvZmkuaW1nID0gbmV3IEltYWdlKGVsLndpZHRoLCBlbC5oZWlnaHQpO1xuICAgIG9maS5pbWcuc3Jjc2V0ID0gbmF0aXZlR2V0QXR0cmlidXRlLmNhbGwoZWwsIFwiZGF0YS1vZmktc3Jjc2V0XCIpIHx8IGVsLnNyY3NldDtcbiAgICBvZmkuaW1nLnNyYyA9IG5hdGl2ZUdldEF0dHJpYnV0ZS5jYWxsKGVsLCBcImRhdGEtb2ZpLXNyY1wiKSB8fCBlbC5zcmM7XG5cbiAgICAvLyBwcmVzZXJ2ZSBmb3IgYW55IGZ1dHVyZSBjbG9uZU5vZGUgY2FsbHNcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYmZyZWQtaXQvb2JqZWN0LWZpdC1pbWFnZXMvaXNzdWVzLzUzXG4gICAgbmF0aXZlU2V0QXR0cmlidXRlLmNhbGwoZWwsIFwiZGF0YS1vZmktc3JjXCIsIGVsLnNyYyk7XG4gICAgaWYgKGVsLnNyY3NldCkge1xuICAgICAgbmF0aXZlU2V0QXR0cmlidXRlLmNhbGwoZWwsIFwiZGF0YS1vZmktc3Jjc2V0XCIsIGVsLnNyY3NldCk7XG4gICAgfVxuXG4gICAgc2V0UGxhY2Vob2xkZXIoZWwsIGVsLm5hdHVyYWxXaWR0aCB8fCBlbC53aWR0aCwgZWwubmF0dXJhbEhlaWdodCB8fCBlbC5oZWlnaHQpO1xuXG4gICAgLy8gcmVtb3ZlIHNyY3NldCBiZWNhdXNlIGl0IG92ZXJyaWRlcyBzcmNcbiAgICBpZiAoZWwuc3Jjc2V0KSB7XG4gICAgICBlbC5zcmNzZXQgPSAnJztcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGtlZXBTcmNVc2FibGUoZWwpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKHdpbmRvdy5jb25zb2xlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignaHR0cHM6Ly9iaXQubHkvb2ZpLW9sZC1icm93c2VyJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcG9seWZpbGxDdXJyZW50U3JjKG9maS5pbWcpO1xuXG4gIGVsLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKFxcXCJcIiArICgob2ZpLmltZy5jdXJyZW50U3JjIHx8IG9maS5pbWcuc3JjKS5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJykpICsgXCJcXFwiKVwiO1xuICBlbC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSBzdHlsZVsnb2JqZWN0LXBvc2l0aW9uJ10gfHwgJ2NlbnRlcic7XG4gIGVsLnN0eWxlLmJhY2tncm91bmRSZXBlYXQgPSAnbm8tcmVwZWF0JztcbiAgZWwuc3R5bGUuYmFja2dyb3VuZE9yaWdpbiA9ICdjb250ZW50LWJveCc7XG5cbiAgaWYgKC9zY2FsZS1kb3duLy50ZXN0KHN0eWxlWydvYmplY3QtZml0J10pKSB7XG4gICAgb25JbWFnZVJlYWR5KG9maS5pbWcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChvZmkuaW1nLm5hdHVyYWxXaWR0aCA+IGVsLndpZHRoIHx8IG9maS5pbWcubmF0dXJhbEhlaWdodCA+IGVsLmhlaWdodCkge1xuICAgICAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSA9ICdjb250YWluJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsLnN0eWxlLmJhY2tncm91bmRTaXplID0gJ2F1dG8nO1xuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGVsLnN0eWxlLmJhY2tncm91bmRTaXplID0gc3R5bGVbJ29iamVjdC1maXQnXS5yZXBsYWNlKCdub25lJywgJ2F1dG8nKS5yZXBsYWNlKCdmaWxsJywgJzEwMCUgMTAwJScpO1xuICB9XG5cbiAgb25JbWFnZVJlYWR5KG9maS5pbWcsIGZ1bmN0aW9uIChpbWcpIHtcbiAgICBzZXRQbGFjZWhvbGRlcihlbCwgaW1nLm5hdHVyYWxXaWR0aCwgaW1nLm5hdHVyYWxIZWlnaHQpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24ga2VlcFNyY1VzYWJsZShlbCkge1xuICB2YXIgZGVzY3JpcHRvcnMgPSB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQocHJvcCkge1xuICAgICAgcmV0dXJuIGVsW09GSV0uaW1nW3Byb3AgPyBwcm9wIDogJ3NyYyddO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUsIHByb3ApIHtcbiAgICAgIGVsW09GSV0uaW1nW3Byb3AgPyBwcm9wIDogJ3NyYyddID0gdmFsdWU7XG4gICAgICBuYXRpdmVTZXRBdHRyaWJ1dGUuY2FsbChlbCwgKFwiZGF0YS1vZmktXCIgKyBwcm9wKSwgdmFsdWUpOyAvLyBwcmVzZXJ2ZSBmb3IgYW55IGZ1dHVyZSBjbG9uZU5vZGVcbiAgICAgIGZpeE9uZShlbCk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9O1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWwsICdzcmMnLCBkZXNjcmlwdG9ycyk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbCwgJ2N1cnJlbnRTcmMnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBkZXNjcmlwdG9ycy5nZXQoJ2N1cnJlbnRTcmMnKTsgfVxuICB9KTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsLCAnc3Jjc2V0Jywge1xuICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZGVzY3JpcHRvcnMuZ2V0KCdzcmNzZXQnKTsgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIChzcykgeyByZXR1cm4gZGVzY3JpcHRvcnMuc2V0KHNzLCAnc3Jjc2V0Jyk7IH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGhpamFja0F0dHJpYnV0ZXMoKSB7XG4gIGZ1bmN0aW9uIGdldE9maUltYWdlTWF5YmUoZWwsIG5hbWUpIHtcbiAgICByZXR1cm4gZWxbT0ZJXSAmJiBlbFtPRkldLmltZyAmJiAobmFtZSA9PT0gJ3NyYycgfHwgbmFtZSA9PT0gJ3NyY3NldCcpID8gZWxbT0ZJXS5pbWcgOiBlbDtcbiAgfVxuICBpZiAoIXN1cHBvcnRzT2JqZWN0UG9zaXRpb24pIHtcbiAgICBIVE1MSW1hZ2VFbGVtZW50LnByb3RvdHlwZS5nZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgcmV0dXJuIG5hdGl2ZUdldEF0dHJpYnV0ZS5jYWxsKGdldE9maUltYWdlTWF5YmUodGhpcywgbmFtZSksIG5hbWUpO1xuICAgIH07XG5cbiAgICBIVE1MSW1hZ2VFbGVtZW50LnByb3RvdHlwZS5zZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICAgIHJldHVybiBuYXRpdmVTZXRBdHRyaWJ1dGUuY2FsbChnZXRPZmlJbWFnZU1heWJlKHRoaXMsIG5hbWUpLCBuYW1lLCBTdHJpbmcodmFsdWUpKTtcbiAgICB9O1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpeChpbWdzLCBvcHRzKSB7XG4gIHZhciBzdGFydEF1dG9Nb2RlID0gIWF1dG9Nb2RlRW5hYmxlZCAmJiAhaW1ncztcbiAgb3B0cyA9IG9wdHMgfHwge307XG4gIGltZ3MgPSBpbWdzIHx8ICdpbWcnO1xuXG4gIGlmICgoc3VwcG9ydHNPYmplY3RQb3NpdGlvbiAmJiAhb3B0cy5za2lwVGVzdCkgfHwgIXN1cHBvcnRzT0ZJKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gdXNlIGltZ3MgYXMgYSBzZWxlY3RvciBvciBqdXN0IHNlbGVjdCBhbGwgaW1hZ2VzXG4gIGlmIChpbWdzID09PSAnaW1nJykge1xuICAgIGltZ3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW1nJyk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGltZ3MgPT09ICdzdHJpbmcnKSB7XG4gICAgaW1ncyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoaW1ncyk7XG4gIH0gZWxzZSBpZiAoISgnbGVuZ3RoJyBpbiBpbWdzKSkge1xuICAgIGltZ3MgPSBbaW1nc107XG4gIH1cblxuICAvLyBhcHBseSBmaXggdG8gYWxsXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgaW1ncy5sZW5ndGg7IGkrKykge1xuICAgIGltZ3NbaV1bT0ZJXSA9IGltZ3NbaV1bT0ZJXSB8fCB7XG4gICAgICBza2lwVGVzdDogb3B0cy5za2lwVGVzdFxuICAgIH07XG4gICAgZml4T25lKGltZ3NbaV0pO1xuICB9XG5cbiAgaWYgKHN0YXJ0QXV0b01vZGUpIHtcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKGUudGFyZ2V0LnRhZ05hbWUgPT09ICdJTUcnKSB7XG4gICAgICAgIGZpeChlLnRhcmdldCwge1xuICAgICAgICAgIHNraXBUZXN0OiBvcHRzLnNraXBUZXN0XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sIHRydWUpO1xuICAgIGF1dG9Nb2RlRW5hYmxlZCA9IHRydWU7XG4gICAgaW1ncyA9ICdpbWcnOyAvLyByZXNldCB0byBhIGdlbmVyaWMgc2VsZWN0b3IgZm9yIHdhdGNoTVFcbiAgfVxuXG4gIC8vIGlmIHJlcXVlc3RlZCwgd2F0Y2ggbWVkaWEgcXVlcmllcyBmb3Igb2JqZWN0LWZpdCBjaGFuZ2VcbiAgaWYgKG9wdHMud2F0Y2hNUSkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmaXguYmluZChudWxsLCBpbWdzLCB7XG4gICAgICBza2lwVGVzdDogb3B0cy5za2lwVGVzdFxuICAgIH0pKTtcbiAgfVxufVxuXG5maXguc3VwcG9ydHNPYmplY3RGaXQgPSBzdXBwb3J0c09iamVjdEZpdDtcbmZpeC5zdXBwb3J0c09iamVjdFBvc2l0aW9uID0gc3VwcG9ydHNPYmplY3RQb3NpdGlvbjtcblxuaGlqYWNrQXR0cmlidXRlcygpO1xuXG5yZXR1cm4gZml4O1xuXG59KCkpO1xuIiwiICB2YXIgbm9KcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2l0ZS1uYXZfX3dyYXBwZXItLW5vanNcIik7XG4gIHZhciB0b3BMaW5lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaXRlLWhlYWRlcl9fbmF2LXdyYXBwZXItLW5vSnNcIik7XG5cbnZhciBpZk5vSnMgPSBmdW5jdGlvbiAoKSB7XG4gIHRvcExpbmUuY2xhc3NMaXN0LnJlbW92ZShcInNpdGUtaGVhZGVyX19uYXYtd3JhcHBlci0tbm9Kc1wiKTtcbiAgbm9Kcy5jbGFzc0xpc3QucmVtb3ZlKFwic2l0ZS1uYXZfX3dyYXBwZXItLW5vanNcIik7XG4gIG5vSnMuY2xhc3NMaXN0LmFkZChcInNpdGUtbmF2X193cmFwcGVyLS1jbG9zZVwiKTtcblxufVxuXG5pZk5vSnMgKCk7XG5cbnZhciBuYXZUb2dnbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpdGUtbmF2X190b2dnbGVcIik7XG52YXIgbmF2V3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2l0ZS1uYXZfX3dyYXBwZXJcIik7XG52YXIgaGVhZGVyVG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaXRlLWhlYWRlcl9fbmF2LXdyYXBwZXJcIik7XG5cbmNvbnNvbGUubG9nKGhlYWRlclRvcCk7XG5cbm5hdlRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCBcImNsaWNrXCIsIGZ1bmN0aW9uKGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgbmF2VG9nZ2xlLmNsYXNzTGlzdC50b2dnbGUoXCJzaXRlLW5hdl9fdG9nZ2xlLS1vcGVuXCIpO1xuICBuYXZXcmFwLmNsYXNzTGlzdC50b2dnbGUoXCJzaXRlLW5hdl9fd3JhcHBlci0tY2xvc2VcIik7XG4gIG5hdldyYXAuY2xhc3NMaXN0LnRvZ2dsZShcInNpdGUtbmF2X19saXN0LS1jbG9zZVwiKTtcbiAgaGVhZGVyVG9wLmNsYXNzTGlzdC50b2dnbGUoXCJzaXRlLWhlYWRlcl9fbmF2LXdyYXBwZXItLW9wZW5cIilcbn0pO1xuXG5vYmplY3RGaXRJbWFnZXMoKTtcbiJdfQ==
